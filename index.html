<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Опрос</title>
  <link rel="stylesheet" href="styles.css?v=2" />
</head>

<body>
  <main class="wrap">
    <header class="top">
      <h1>Опрос</h1>

      <div class="progress" aria-label="Прогресс прохождения опроса">
        <div id="progressBar" class="progress__bar"></div>
      </div>

      <div id="stepTitle" class="muted">Страница 1 из 7</div>
    </header>

    <form id="surveyForm" novalidate>
      <!-- STEP 1 / 7 -->
      <section class="step">
        <h2>Инструкция</h2>
        <div class="instruction">
          Пожалуйста, ответьте на вопросы максимально честно. Заполнение занимает несколько минут.
        </div>

        <label class="field checkbox">
          <input type="checkbox" name="consent" required />
          <span>Я согласен(на) участвовать в исследовании и подтверждаю, что мне 18+.</span>
        </label>

        <div class="hint">Кнопка «Далее» станет активной после согласия.</div>
      </section>

      <!-- STEP 2 / 7 (как на скрине) -->
      <section class="step" hidden>
        <h2>Общие вопросы</h2>

        <label class="field">
          <span>Пол</span>
          <div class="choices">
            <label><input type="radio" name="gender" value="male" required /> Мужской</label>
            <label><input type="radio" name="gender" value="female" required /> Женский</label>
          </div>
        </label>

        <label class="field">
          <span>Возраст</span>
          <input
            type="text"
            name="age"
            inputmode="numeric"
            autocomplete="off"
            placeholder="Например, 27"
            required
            pattern="\d{1,2}"
          />
          <small class="hint">Только цифры, не более двух знаков.</small>
        </label>

        <label class="field">
          <span>Есть ли диагностированные психические заболевания?</span>
          <div class="choices">
            <label><input type="radio" name="dx" value="yes" required /> Да</label>
            <label><input type="radio" name="dx" value="no" required /> Нет</label>
          </div>
        </label>
      </section>

      <!-- STEP 3 / 7 (опциональный, JS ожидает stepIndex === 2) -->
      <section class="step" hidden>
        <h2>Работа и доход (необязательно)</h2>

        <label class="field">
          <span>Трудоустройство</span>
          <div class="choices col">
            <label><input type="radio" name="employment" value="employed" /> Работаю</label>
            <label><input type="radio" name="employment" value="student" /> Учусь</label>
            <label><input type="radio" name="employment" value="unemployed" /> Не работаю</label>
            <label><input type="radio" name="employment" value="retired" /> Пенсионер(ка)</label>
            <label><input type="radio" name="employment" value="other" /> Другое</label>
          </div>
          <small class="hint">Этот блок можно пропустить — «Далее» доступно всегда.</small>
        </label>

        <label class="field">
          <span>Доход (примерно)</span>
          <div class="choices col">
            <label><input type="radio" name="income" value="low" /> Низкий</label>
            <label><input type="radio" name="income" value="mid" /> Средний</label>
            <label><input type="radio" name="income" value="high" /> Высокий</label>
            <label><input type="radio" name="income" value="prefer_not" /> Предпочитаю не отвечать</label>
          </div>
        </label>
      </section>

      <!-- STEP 4 / 7 -->
      <section class="step" hidden>
        <h2>Утверждения (часть 1)</h2>

        <div class="scale-note">
          <div class="scale-item">0 — Полностью не согласен</div>
          <div class="scale-item">1 — Скорее не согласен</div>
          <div class="scale-item">2 — Ни согласен, ни не согласен</div>
          <div class="scale-item">3 — Скорее согласен</div>
          <div class="scale-item">4 — Полностью согласен</div>
        </div>

        <div id="m1Questions"></div>
      </section>

      <!-- STEP 5 / 7 -->
      <section class="step" hidden>
        <h2>Утверждения (часть 2)</h2>

        <div class="scale-note">
          <div class="scale-item">1 — Утверждение совсем не описывает меня</div>
          <div class="scale-item">2 — Утверждение едва описывает меня</div>
          <div class="scale-item">3 — Утверждение умеренно описывает меня</div>
          <div class="scale-item">4 — Утверждение во многом описывает меня</div>
          <div class="scale-item">5 — Утверждение полностью описывает меня</div>
        </div>

        <div id="m2Questions"></div>
      </section>

      <!-- STEP 6 / 7 -->
      <section class="step" hidden>
        <h2>Утверждения (часть 3)</h2>
        <div id="m3Questions"></div>
      </section>

      <!-- STEP 7 / 7 -->
      <section class="step" hidden>
        <h2>Завершение</h2>
        <div class="instruction">
          Нажмите «Отправить», чтобы завершить опрос.
        </div>

        <div id="submitError" class="error" hidden>Не удалось отправить ответы. Попробуйте ещё раз.</div>
        <div id="submitOk" class="ok" hidden>Спасибо! Ответы успешно отправлены.</div>
      </section>

      <!-- ВАЖНО: одна (!) плашка -->
      <div class="privacy-note">
        Все данные строго анонимны, анализ проводится в обобщенном виде
      </div>

      <!-- ВАЖНО: один (!) футер с кнопками -->
      <footer class="nav">
        <button type="button" id="prevBtn" class="btn secondary" hidden>Назад</button>
        <button type="button" id="nextBtn" class="btn" disabled>Далее</button>
        <button type="submit" id="submitBtn" class="btn" hidden>Отправить</button>
      </footer>
    </form>
  </main>

  <!-- ВАЖНО: один (!) подключенный скрипт, строго внутри <body> -->
  <script src="app.js?v=2"></script>
</body>
</html>
      <footer class="nav">
        <button type="button" id="prevBtn"
<script src="app.js?v=1"></script>
